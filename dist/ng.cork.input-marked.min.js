angular.module("ng.cork.input-marked.templates",[]).run(["$templateCache",function(a){a.put("lib/ng.cork.input-marked/inputMarked.tpl.html",'<div class="cork-input-marked cork-im-mode-{{mode}}" ng-class="{\'cork-is-disabled\': disabled}"><div ng-show="mode === \'edit\' || mode === \'split\'" class="cork-im-panel cork-im-panel-edit"><textarea class=form-control ng-model=modelValue placeholder={{placeholder}} cork-ui-textarea-auto-resize></textarea><div class=cork-im-toolbar><button tab-index=0 class="cork-im-toolbar-btn cork-im-done" ng-show="hasPreview && (mode === \'edit\' || mode === \'split\')" class=pull-right ng-click=done()><i class="cork-icon fa fa-check"></i> <span class=cork-icon-text>done</span></button> <button tab-index=0 class="cork-im-toolbar-btn cork-im-split" ng-show="hasSplit && mode === \'edit\'" class=pull-right ng-click=split()><i class="cork-icon fa fa-eye"></i> <span class=cork-icon-text>preview</span></button></div></div><div ng-show="mode === \'preview\' || mode === \'split\'" class="cork-im-panel cork-im-panel-preview" ng-click="mode === \'preview\' ? edit() : noop()"><div class=cork-im-toolbar><button tab-index=0 class="cork-im-toolbar-btn cork-im-edit" ng-show="!disabled && hasEdit && mode === \'preview\'" class=pull-right ng-click=edit()><i class="cork-icon fa fa-pencil"></i> <span class=cork-icon-text>edit</span></button> <button tab-index=0 class="cork-im-toolbar-btn edit" ng-show="!disabled && hasEdit && mode === \'split\'" class=pull-right ng-click=edit()><i class="cork-icon fa fa-times"></i> <span class=cork-icon-text>close</span></button></div><div class=cork-im-markdown><div marked=placeholder ng-if=!modelValue></div><div marked=modelValue></div></div></div></div>')}]),function(a){"use strict";var b=a.module("ng.cork.input-marked",["hc.marked","ng.cork.ui.textarea-auto-resize","ng.cork.input-marked.templates"]);b.directive("corkInputMarked",["$rootScope","$timeout",function(b,c){return{restrict:"A",templateUrl:"lib/ng.cork.input-marked/inputMarked.tpl.html",replace:"element",require:"ngModel",scope:{modelValue:"=ngModel",disabled:"=corkDisabled",placeholder:"=corkPlaceholder",modes:"=corkModes"},link:function(b,d){var e=d.find("textarea")[0],f=[];b.mode="preview",b.edit=function(){b.disabled||(b.mode="edit",c(function(){e.focus()}))},b.split=function(){b.disabled||(b.mode="split")},b.done=function(){b.mode="preview"},b.$watch("modes",function(c){a.isArray(c)&&c.length||(c=["preview","edit","split"]),f=c,b.hasEdit=-1!==c.indexOf("edit"),b.hasPreview=-1!==c.indexOf("preview"),b.hasSplit=-1!==c.indexOf("split"),-1===c.indexOf(b.mode)&&(b.mode=c[0])},!0),b.$watch("disabled",function(a){a&&"preview"!==b.mode&&b.done()})}}}])}(angular);